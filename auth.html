<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, minimal-ui">
    <title>Authentication and authorization</title>
    <link type="text/css" rel="stylesheet" href="assets/css/github-markdown.css">
    <link type="text/css" rel="stylesheet" href="assets/css/pilcrow.css">
    <link type="text/css" rel="stylesheet" href="assets/css/hljs-github.min.css" />
    <link type="text/css" rel="stylesheet" href="assets/css/main.css" />
</head>

<body data-title="Authentication and authorization">
    <div class="wrapper">
        <div class="egnyte-branding">
            <div class="nav">

            </div>
        </div>
        <div class="nav">
            <a href="index.html" class="back-to-main">&#11188; Back to Table of Contents</a>
        </div>
        <article class="markdown-body"><h1 id="authentication-and-authorization"><a class="header-link" href="#authentication-and-authorization"></a>Authentication and authorization</h1>
<p>Egnyte APIs use OAuth2.</p>
<ul class="list">
<li>API key (also known as client_id) - is the identifier of an application/integration</li>
<li>API token (also known as access_token) - auth token generated for a particular user using the API key and OAuth flow</li>
</ul>
<p>We are providing a helper service <em>&quot;Enhanced Auth Service&quot;</em> to our partners developing apps that adds an additional step before OAuth Auth Code flow to ask the user about their Egnyte Connect domain (what&#39;s a domain? see <a href="./definitions.html">definitions</a>)</p>
<p>You should evaluate using the service before trying anything else. More on that below.</p>
<p>Our online documentation lists various methods of getting an access token:</p>
<ul class="list">
<li><a href="https://developers.egnyte.com/docs/read/Public_API_Authentication#Authorization-Code-Flow">AUTHORIZATION CODE FLOW</a> - your default choice of OAuth2 flow. It&#39;s also the only flow that works with <em>Enhanced Auth Service</em></li>
<li><a href="https://developers.egnyte.com/docs/read/Public_API_Authentication#Authorization-Code-Flow">IMPLICIT GRANT FLOW</a> - A less secure version of OAuth2 compatible flow. Only usable for integrations that are limited to just JavaScript code in the browser and have no back-end to participate in auth. Not recommended unless it&#39;s impossible to use Code flow.</li>
<li>Internal Applications &quot;Resource Owner Password Credentials Flow&quot; - only usable for Egnyte customers using the APIs. Your developer key will not work with this method</li>
</ul>
<h2 id="enhanced-auth-service"><a class="header-link" href="#enhanced-auth-service"></a>Enhanced Auth Service</h2>
<p>The service will start by asking your user what their Egnyte domain is. (what&#39;s a domain? see <a href="./definitions.html">definitions</a>)</p>
<p>If user types a domain that their company set up on top of the one provided by Egnyte, our service will make sure it&#39;s correctly resolved to {somename}.egnyte.com for you.</p>
<p>After getting the domain, <em>Enhanced Auth Service</em> will get the Auth Code step done too and let you continue the flow.</p>
<h3 id="usage"><a class="header-link" href="#usage"></a>Usage</h3>
<p><a href="https://developers.egnyte.com/docs/read/Public_API_Authentication#Enhanced-Auth-Service">Enhanced Auth Service documentation</a></p>
<p>Use it just like you would use the first step of OAuth2 Code flow.</p>
<p>We provide two URLs for the service to let you redirect users to the closest location, but in fact only one request is made to that server, so if you don&#39;t have means to figure out if the user should start in US or Europe, just pick one.</p>
<h2 id="getting-current-user"><a class="header-link" href="#getting-current-user"></a>Getting current user</h2>
<p>It&#39;s sometimes too easy to miss it, so it deserves a direct link here.</p>
<p>This is how you get the current user based on an access token in the request:
<a href="https://developers.egnyte.com/docs/read/Public_API_Authentication#Getting-User-Info">Getting User Info</a></p>
<p>For more details about the user, if necessary, you can request Users API by id.</p>
<h2 id="errors"><a class="header-link" href="#errors"></a>Errors</h2>
<blockquote>
<p>Developer Inactive</p>
</blockquote>
<p>When API responds to an authenticated request with this information it means the token you are using is incorrect or missing (typo maybe?).</p>
<p>This error can also happen if you&#39;re using a token generated by a key that&#39;s only supposed to work with <code>*.qa-egnyte.com</code> with <code>*.egnyte.com</code>.</p>
<blockquote>
<p>Invalid Egnyte domain configured in app profile.</p>
</blockquote>
<p>While you&#39;re developing your integration, the API key is configured to only work with one Egnyte domain - the one that&#39;s been registered for you. Once you get your integration certified, it will work with all Egnyte domains. For now you need to stick to your developer environment.</p>
        </article>
        <div class="nav">
            <a href="index.html" class="back-to-main">&#11188; Back to Table of Contents</a>
            <a href="#top"> &#11192; Back to top</a>
        </div>
    </div>
    <script src="assets/js/test.js"></script>
</body>

</html>
